## Theorem
Let $f_k\to f$ in measure, then $\exists$ subsequence $\{f_{k_j}\}$ s.t. $f_{k_j}\to f$ a.e. in $E$

#### proof.
Given any $j\in \mathbb N$, $\exists K_j\in \mathbb N$ s.t. $|\{|f_k-f|>\frac 1j\}|<2^{-j}\forall k\ge K_j$

we may assume $K_j\to\infty$
Denote $E_j=\{ |f(x)-f_{K_j}(x)|>\frac 1j \}$ and $H_m=\cup_{j=m}^\infty E_j$

- check:
$|H_m|\le \sum_{j=m}^\infty |E_j|<2^{-m+1}$
Note that for $x\in H_m$, $|f(x)-f_{K_j}(x)|>\frac 1j\forall j\ge m$
That is, $|f(x)-f_{K_j}(x)|<\frac 1j \forall j\ge m,x\in E - H_m$

Define $H=\cap_m H_m$, then $|H|=0$, and if $x\in E-H$, then $x\in E-(\cap_m H_m)=\cup_m (E-H_m)$
$\implies x\in E-H_m$ for some $m$.
We then obtain $f_{K_j}\to f$

## Theorem [Cauchy in measure]
The necessary and sufficient condition that $f_k\to f$ in measure is that $\{f_k\}$ is Cauchy in measure.
i.e. $\lim_{k,\ell \to \infty} \left| \{|f_k(x)-f_\ell(x)|>\epsilon  \} \right|=0\forall \epsilon>0$

proof.
$\to$
Assume $f_k\to f$ in measure, then $\forall \epsilon,\eta>0,\exists K_{\epsilon,\eta}>0$ s.t. $|\{f_k(x)-f(x) > \epsilon/2\}| <\eta/2\forall k\ge K_{\epsilon,\eta}$

so, if $k,\ell > K_{\epsilon,\eta}$ then 
- $\{|f_k(x)-f_\ell(x)|>\epsilon\}\subseteq \{|f_k(x)-f(x)|>\epsilon/2\}\cup \{ |f_\ell(x)-f(x)|>\epsilon/2 \}$

$|\{|f_k-f_\ell|>\epsilon\}|\le |\{|f_k-f|>\epsilon/2\}| + |\{|f_\ell-f|>\epsilon/2\}|$
$\le \eta/2+\eta/2=\eta$

Therefore, $\{f_k\}$ is Cauchy in measure.

$\gets$
suppose $\{f_k\}$ is Cauchy in measure,
$\forall \in\mathbb N$, $\exists N_j$ s.t. if $k,\ell>N_j,|\{|f_k(x)-f_\ell(x)|>2^{-j}\}|<2^{-j}$
we may assume $N_j\to\infty$

Hence, $|f_{N_j}(x)-f_{N_{j+1}}(x)|\le 2^{-j}$ for $x\in E-E_j$, where $|E_j| < 2^{-j}$

Denote $H_m=\cup_{j=m}^\infty E_j$, then $|f_{N_{j+1}}(x)-f_{N_j}(x)|\le 2^{-j}\forall j\ge m$ and $x\in E-H_m$

Note $|H_m|\le 2^{-m+1}$, then $\sum_{i=j}^\infty |f_{N_{i+1}}(x)-f_{N_j}(x)|\le 2^{-j+1}\forall j\ge m, x\in E-H_m$

$\implies \{f_{N_j}(x)\}$ converges uniformly in $E-H_m$
Hence, $\{f_{N_j}(x)\}$ is a Cauchy sequence $\forall x\in E-H_m$

Also, $|H_m|\to 0$ therefore $\{f_{N_j}\}$ is Cauchy a.e. in $E$

$\implies \exists f(x)$ s.t. $f_{N_j}(x)\to f(x)$ in $E$

Lastly, we check
$|\{|f_k(x)-f(x)|>\epsilon\}|\le |\{|f_k(x)-f_{N_j}(x)|>\epsilon/2\}|+|\{|f_{N_j}(x)-f(x)|>\epsilon/2\}|\to 0$ as $k\to\infty$


# Lebesgue integrals
We want to define the integral of measurable function $f$ on a measurable set $E$

Let $f:E\to [0,\infty]$ is a nonnegative measurable function, $E\subseteq \mathbb R^n$ is measurable
Define two sets:
- $\Gamma (f,E)=\{(x,f(x)):x\in E, f(x)<\infty\}\subseteq \mathbb R^{n+1}$
- $R(f, E)=\{(x,y):x\in E,0\le y\le f(x)\ if\ f(x)<\infty,0\le y<\infty\ if\ f(x)=\infty\}$

## Def.
If $R(f, E)$ is measurable(as a subset of $\mathbb R^{n+1}$) and its measure $|R(f,E)|$ is called the Lebesgue measure of $f$ over $E$ and we write
- $|F(f,E)|=\int_E f(x)dx$

Note that $\int_E f(x)dx$ may not be finite.

## Theoren
Let $f$ be nonnegative measurable function defined on the measurable set $E\subseteq \mathbb R^n$, then $R(f,E)$ is a measurable set in $\mathbb R^{n+1}$, so the Lebesgue integral $\int_E f(x)dx=|R(f,E)|$ exists.

#### remark
The converse us also true, i.e. if $R(f,E)$ measruable then $f$ is also measurable.


Note that $\exists$ a sequence of simple function $\{f_k\}$ s.t. $f_k\to f$

Any simple function $f(x)=\sum_{k=1}^N a_k\chi_{E_k}$, $\{E_k\}$ is non-overlapping(or disjoint) measurable sets.

#### Lemma.
Let $E$ be a measurable subset of $\mathbb R^n$ and $a\in [0,\infty]$
define $E_a=\{(x,y):x\in E,0\le y\le a\}$ if $a<\infty$,
$E_\infty = \{(x,y),x\in E,0\le y<\infty\}$

then $E_a$ is measurable in $\mathbb R^{n+1}$ and $|E_a|_{(n+1)}$ (Lebesgue measure of $\mathbb R^{n+1}$) $a\times |E|_{(n)}$

(we interpret $0\cdot \infty=0$)

proof.
1. Assume furst that $a$ is finite, the result is obvious if $|E|_{(n)}=0$ or $E$ is a cube. (if $|E_a|_{(n)}=0\implies |E_a|_{(n+1)}=0$)
Now assume $E$ is open in $\mathbb R^n$, then $E=\cup_k R_k$, where $\{R_k\}_{k=1}^\infty$ is a collection of non-overlapping cubes.
Then $E_a=\cup_k (R_k)_a$ is measurable and $|E_a|_{(n+1)}=\sum_{k=1}^\infty |(R_k)_a|_{(n+1)}=a|E|_{(n)}$

2. For general measurable set $E,E=H-Z$ where $H\in G_\delta,|Z|=0$
i.e. $H=\cup_k G_k$, where $G_k$ is open in $\mathbb R^n$
Assume $|E|<\infty,$ we my assume $G_1<\infty$
Define $H_k=G_1\cap G_2\cap ...\cap G_k$, then $H_k\to H$ decreasingly and $|H_k|\to |H|$
Now $(H_k)_a$ is measurable and $|(H_k)_a|_{(n+1)}=a|H_k|_{(n)}$
$(H_k)_a \to H_a$ decreasingly $\implies |(H_k)_a|_{(n+1)}\to |H_a|_{(n+1)}$
$\implies |H_a|_{(n+1)}=\lim_{k\to\infty} a|H_k|_{(n)}=a|H|_{(n)}$
Note $E_a=H_a-Z_a\implies E_a$ is measurable with $|E_a|_{(n+1)}=a|E|_{(n)}$

3. Fot the case $|E|=\infty$, we decompose $E$ into a union of $\{E_k\}$ with $|E_k|<\infty \forall k$
For the case $a=\infty$, we find a sequence $\{a_k\}$, $a_k\to\infty$.

#### proof of theorem
Let $\{f_k\}$ be a sequence of mesurable simple functions s.t. $f_k\to f$ increasingly

clearly, $R(f_k, E)\cup \Gamma(f, E)\to R(f, E)$ increasingly.

###### claim
$|\Gamma(f,E)|_{(n+1)}=0$(and therefore measrable)

Since $R(f_k, E)$ and $\Gamma(f, E)$ are measurable, $R(f, E)$ is  measurable.
Note that $|R(f_k, E)|_{(n+1)}=\sum_{j=1}^{N_k} a_{k,j} |E_j|_{(n)}$

$\implies |R(f_k, E)|\to |R(f, E)|$
