## Recall a key lemma
#### Lemma
if $E\subseteq \mathbb R^1$ and $E$ measurable with $|E|>0$
Then the set $\{d=x-y:x,y\in E\}\subseteq \mathbb R$ contain an interval centered at $0$

lemma $\implies$ Construct a nen-measurable set in $\mathbb R^1$(Vitali)

in the proof, we use $\mathbb R^1=\cup_{q\in\mathbb Q}\{V+q\},V$ is the non-measurable set

## Theorem
Let $A$ be a subset of $\mathbb R^1$ with $|A|_e>0$, then $A$ contains  non-measurable subset.

#### proof:
$A=\cup_{q\in\mathbb Q} (\{V+q\} \cap A)=\cup_{q\\in\mathbb Q} A_q$, where $A_q=A\cap \{V+q\}$

Each $\{d=x-y:x,y\in A_q\}$ cannot contain an interval centered at $0$
So either $A_q$ is non-measurable or $|A_q|=0$

But, $|A|_e\le \sum_{q\in \mathbb Q}|A_q|=0$ if $|A_q|=0\forall q$, contradiction

Therefore, at least one $A_q$ is non-measurable

# Lebesgue measurable sets and  Borel sets
Denote $\mathcal{L}:$ Lebesgue measurable sets ($\sigma-algebra$)

$\mathcal{B}$: Borel sets (the smallest $\sigma-algebra$ containing all open sets in $\mathbb R^n$)

$\implies \mathcal{B}\subseteq \mathcal L$, is the inequality hold?

Let $\lambda$ be the Lebesgue measure of $\mathbb R^n$, then $\lambda_\mathcal B$
 is a measurable defined on $\mathcal B$, such a measure is called **Borel Measure**.

## Def.
Let $(X,\mathcal A,\mu)$ be a measurable space, this space is called  complete if for any $A\in \mathcal A$ with $\mu(A)=0$, then $B\in \mathcal A$ whenever $B\subseteq A$(and then $\mu(B)=0$)

# construction of an assist function
construction of a special function in $[0,1]$

step 1:

Let $f_0(x)=x, x\in[0,1]$ construct $f_1$ as follow

找出點$(x_1,y_1)$在左下平面使得$(0,0)\to (x_1,y_1)$ slope = $\frac 12$, and $(x_1,y_1)\to (\frac 12,\frac 12)$ slope $=2$
samely find $(x_2,y_2)$ 在右上平面 s.t. $(\frac 12, \frac 12)\to (x_2,y_2)$ slope $=\frac 12,(x_2,y_2)\to (1,1)$ slope $=2$

the constructed $f_1$ will be 

## General Step

Let $f_n$ be constructed, and $I=[a,b]$ be one of the intervals where $f_n$ is affine (e.g. for $n=1$, $I=[0,1]$)
Then $f_{n+1}$ is contructed as follows:
- Let $A=(a,f_n(a)),B=(b,f_b(b))$ and $c$ be the midpoint of the segment $\overline{AB}$
Next, let $D$ be the point below the segment $\overline{AC}$ s.t. the slope of $\overline{AD}$ is $2^{-(n+1)}$ and the slope of $\overline{CD}$ is $2^{n+1}$

we perfome the same procedure for the segment $\overline {CB}$
Let $f(x)=\lim_{n\to\infty} f_n(x)$, we can verify $f_n\to f$ uniformly (HW), and $f$ is continuous and strictly increasing.

proof of strictly increasing:
given any $0\le x<y\le 1$, then $[x,y]$ must contain in $[\alpha,\beta]$ where $f_n$ is affine with $n>>1$
Hence, $f(x)\le f(\alpha)=f_n(\alpha)<f_n(\beta)\le f(y)$

## Important properties
Let $A_n=\cup\{intervals\ [\alpha,\beta],\ where\ \ f_n\ is\ affine,\ f'_n=2^n\}$

$B_n=\cup\{intervals\ [\alpha,\beta],\ where\ \ f_n\ is\ affine,\ f'_n=2^{-n}\}$

Then
- $[\alpha,\beta]\in A_n\implies f(\beta)-f(\alpha)=2^n(\beta-\alpha)$
- $[\alpha,\beta]\in B_n\implies f(\beta)-f(\alpha)=2^{-n}(\beta-\alpha)$

Therefore adding all such intervals
$|f(A_n)|=2^n|A_n|$, $|A_n|+|B_n|=1$
$|f(B_n)|=2^{-n}|B_n|,|f(A_n)|+|f(B_n)|=1$

So we have the solution
- $|A_n|=\frac{2^n-1}{2^{2n}-1},|B_n|=2^n \frac{2^n-1}{2^{2n}-1}$
- $|f(A_n)|=2^n \frac{2^n-1}{2^{2n}-1}, |f(B_n)|= \frac{2^n-1}{2^{2n}-1}$

Define $S=\limsup_{n\to\infty} A_n=\cap_{n=1}^\infty \cup_{j\ge n} A_j$, we can show that $|S|=0$ ($0\le |S| = \lim_n |S_n|\le \lim_{n\to \infty} \sum_{j\ge n}|A_j|=0$)

$f(S_n)=\cup_{j=n}^\infty f(A_j)$, $f(S)=\cap_{n=1}^\infty f(S_n)$

$\implies 1 \ge |f(S)| = \lim_{n\to\infty} |f(S_n)|\ge \lim_{n\to\infty} |f(A_n)|=1$

Therefore, $f$ map $S$ onto $f(S)$ with $|S|=0,|f(S)|=1$
$\iff |f(S^c)|=0$ and $|S^c|=1$ ($E^c=[0,1]-E$)

# Non-Completeness of Borel Measure

we want to use such function to construct a non-Borel but Lebesgue measurable sets.

Let $\mathcal F=\{{\rm subsets}E\subseteq [0,1] {\rm\ s.t. }f^{-1}(E){\rm\ Lebesgue\ measurable\ in\ }[0,1] \}$

#### claim
$\mathcal F$ is a $\sigma-algebra$
(HW)

In fact, we can show that $\mathcal F$ contains all open sets, i.e. $\mathcal F$ contains $\mathcal B$
$\iff f^{-1}(\mathcal B)$ is measurable

Since $f$ is continuous and strictly increasing, $f^{-1}(\mathcal B)$ is Borel

## Theorem
1. $\exists$ a subset $E$ of $[0,1]$ which is Lebesgue measurable but it's not Borel
2. Borel measure is not complete

#### proof.

##### 1. 

Let $E$ be a non-measurable set in $[0,1]$, Then $E-S$ is not measurable. otherwise, $E=(E-S)\cup \underbrace{S}_{measure\ 0}$ is measurable (contradiction)

$D=f(E-S)\subseteq [0,1]$, then
$D\subseteq [0,1]-f(S)$ which is a measure zero set.

$\implies D$ is Lebesgue measurable with $|D|=0$

If $D$ is Borel, then $f^{-1}(D)$ is a Borel set, hence measurable, but it's a contradiction since $f^{-1}(D)=E-S$ is non-measurable

That is, $D$ is **NOT** a Borel set.

##### 2.
$D$ is a Lebesgue measurable set with $|D|=0$
There exists a $G_\delta$ set, say $G$ s.t. $D\subseteq G$ and $|G|=0$
$G\in G_\delta \subseteq \mathcal B$ is Borel
But $D$ is not Borel, so the Borel measure is not complete.


###### remark
The collection of sets in $[0,1],\mathcal F$ does not contain $\sigma-algebra$ of Lebesgue measurable sets in $[0,1]$

# Lebesgue measurable function
## Def.
Let $E$ be a set in $\mathbb R^n$, A function $f:E\to[-\infty,\infty]$ (can be $\pm \infty$) is call an **extended real-valued functionn**

## Def.
Let $E$ be a (Lebesgue measurable, see remark) set in $\mathbb R^n$, An extended function is said to be **measurable** iff $\forall$ finite $a\in\mathbb R$, the set $\{x\in E:f(x)>1\}$ is Lebesgue measurable.

###### remark
the original definition does not restrict $E$ needed to be measurable, however this cause some problem.
$E=\{x:f(x)=-\infty\}\cup(\cup_{k=1}^\infty \{x:f(x)>-k\})$
if $f$ measurable, then $\{x:f(x)>-k\}$ measurable, but is not assure $\{x:f(x)=-\infty\}$ is measurable, therefore cannot assure the measurability of $E$ itself.

Therefore, **in this lecture, we only discuss the condition that $E$ is measurable**

## Theorem
The following statements are equivalent

- i. $f$ is measurable
- ii.  $\{x:f(x)\ge a\}$ is measurable for $a$ finite
- iii. $\{x:f(x)<a\}$ is measurable for $a$ finite
- iv. $\{x:f(x)\le a\}$ is measurable

i, ii, iii or iv $\implies \{x:f(x)=a\}$ is measurable $\forall a\in[-\infty,\infty]$

