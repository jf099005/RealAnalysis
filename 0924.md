## Recall
if $\phi$ cont. in $R$ and $f$ measurable and finite a.e.  then $f\phi(f)$ measurable a.e.



## Example
1. if $f,g$ measruable, then $\{f>g\}=\cup_{q_k\in Q}\{f>q_k>g\}$ measurble


2. let $f_k$ be a sequence of measurable function, then
- $\sup_{k}f_k(x)$ and $\inf_k f_k(x)$ measurable
- $\liminf_k f_k(x)$, $\limsup_k f_k(x)$ measurable

proof of 1.
$\{x:\inf_k f_k(x)<a\}=\cap_k \{f_k(x)<a\}$
$\{x:\sup_k f_k(x)>a\}=\cup_k \{f_k(x)>a\}$, therfore measurable
therfore measurable, and by definition $\inf_kf$ and $\sup_k f$ measurable

proof of 2.
$\{\liminf_k f_k(x)>a\}=\cup_n \cap_{k\ge n}\{f_k(x)>a\}$
$\{\limsup_k f_k(x)>a\}=\cap_n \cup_{k\ge n}\{f_k(x)>a\}$

Therefore, both measurable

## Def. simple function
$f$ is called a simple function if $f(x)=\sum_{k=1}^N a_k \chi_{E_k}$, $a_1,...,a_N\in\mathbb R,E_1,...,E_N$ are disjoint subsets.

where $\chi_E=\begin{cases}
1&x\in E\\
0&x\notin E
\end{cases}$

#### remark
$f$ measurable $\iff$ $E_1,E_2,...E_N$ are measurable sets

## Therorem
- 1. every function $f$ can be written as the limit of a sequence of simple functions

- 2. if $f(x)\ge 0$ then the sequence can be chosen to increase to $f$
i.e. $f_k(x)\le f_{k+1}(x)\le ...\le f$ and $f_k\to f$ increasingly(pointwise)

- 3. if $f$ is measurable, then the sequence of simple function in $(i)$ and $(ii)$ can be chosen ti be measurable.

#### proof.
we first probe the case $f\ge 0$
###### ii
for $k=1,2,...$, we divide $[0,k]$ into $[(j-1)2^{-k}, j2^{-k}],j=1,2,...,k2^k$
$f_k(x)=\begin{cases}
    \frac{j-1}{2^k}& if\ \frac{j-1}{2^k}\le f(x) < \frac{j}{2^k}\\
    k& if\ f(x)\ge k
\end{cases}$

$f_k(x)=\sum_{j=1}^{k2^{k}}\frac{j-1}{2^{k}}\chi_{\{\frac{j-1}{2^k}\le f(x)<\frac j{2^k}\}}$ is a simple function.

obviously, $0\le f(x)-f_k(x)<\frac 1{2^k}$ for sufficiently layge $k$ if $f$ is bounded.
and $f_k=k\to \infty$ when $f(x)=+\infty$

i.e. $f_k\to f$ almost everywhere.
besides, $f_k$ is increasing

###### i
we write $f(x)=f^+(x)-f^-(x)$, then $f^+_k(x)\to f^+(x)$ increasingly, and $f_k^-(x)\to f(x)^-$ increasingly

Therefore, $f_k^+-f_k^-\to f^+-f^-=f$

###### iii
obviously, the set $\{\frac{j-1}{2^k}\le f(x)<\frac j{2^k}\}$ measurable by definition

# Semi-continuous functions
Recall that $f$ is measurable function $\iff\forall a\in \mathbb R,\{x:f(x)>a\}$ is measurable.

## Def. semicon
Let $x_0$ be a limit point of $E$ and $x_0\in E$, then $f$ is said to **upper semi continuous** at $x_0$ (USC at $x_0$) if $\limsup_{x\to x_0,x\in E} f(x)\le f(x_0)$ (can be $\infty$)

samely, $f$ is **lower semi continuous** at $x_0$(LSC) if $\liminf_{x\to x_0,x\in E}f(x)\ge f(x_0)$

We say that $f$ is USC / LSC relative to $E$ if it is USC/LSC at every limit point of $E$, which lies in $E$.

#### remark
$\limsup_{x\to x_0,x\in E}f(x)=\inf_{\delta}\sup\{f(x):0<|x-x_0|<\delta,x\in E\}$
$(=\lim_{\delta\to 0}\sup\{f(x):0<|x-x_0|<\delta,x\in E\})$

$\liminf_{x\to x_0,x\in E}f(x)=\sup_{\delta}\inf \{ f(x):x<|x-x_0|<\delta \}$

If $f(x_0)=\infty$, then $f$ is USC at $x_0$

Now assume that $f(x_0)<\infty$, Goven any $M>f(x_0),M\in\mathbb R$, $f$ is USC iff there exist $\delta$ s.t. $f(x)<M\forall x\in E,|x-x_0|<\delta$

If $f(x_0)=-\infty$, then $f$ is LSC at $x_0$
Now assume that $f(x_0)>-\infty$, $f$ is LSC at $x_0$ iff given $m<f(x_0)$ there exist $\delta>0$ s.t. $m<f(x)\forall x\in E$ with $0<|x-x_0|<\delta$

#### remark
If $f(x)$ is both USC and LSC at $x_0$, then $f$ is continuous at $x_0$

#### example
Let $f(x)=\begin{cases}
1&x\in \mathbb Q^c\\\
0&x\in \mathbb Q
\end{cases}$, then $f$ is LSC at $\mathbb Q$ and USC at $\mathbb Q^c$
However, $f$ is not continuous function

## Theorem
- 1. $f$ is USC relative to $E$ iff the set $\{f(x)<a\}$ is relatively open in $E$(or $\{f(x)\ge a\}$ is relatively closed) $\forall$ finite $a$
- 2. $f$ is LSC relative to $E$ iff the set $\{f(x)>a\}$ is relatively open in $E$(or $\{f(x)\le a\}$ is relatively closed) $\forall$ finite $a$

#### proof
$f$ is USC at $x_0\iff$ $-f$ is LSC at $x_0$
therefore, we only need to prove i.

Let $x_0\in E$ is a limit point, $f$ is USC at $x_0$,
then we want to show that $\{f(x)<a\}$ is relatively open in $E$.

Then we want to show that if $f(x_0)<a$, then $\exists \delta$ s.t. $f(x)<a\forall x\in E,|x-x_0|<\delta$, this follows from definition (see the remark)

The converse also follows from definition

## Corollary
Assume that $f$ is an extended real-valued function in a measurable set $E$, if $f$ is semicontinuous relatively to $E$, then $f$ is measurable.

## Littlewood three principles
- 1. A measurable set is "roughly" an openset
- 2. Convergence pointwise is "roughly" uniform convergence
(Egorov's theorem)
- 3. A measurable function is "roughly" continuous function
(Lustin's theorem)

### Egorov's Theorem
Let $\{f_k\}$ be a sequence of measurable functions, which converge almost everywhere in a set $E$ of **finite** measure to a **finite** limit

(i.e. $\exists Z$ with $|Z|=0$ s.t. $\forall x\in E\backslash Z,f_k(x)\to f(x)$ and $|f(x)|<\infty$)

Then $\forall \epsilon>0,\exists$ closed set $F\subset E$ with $|E-F|<\epsilon$ s.t. $f_k\to f$ **uniformly** on $F$

#### Remark
- 1. $|E|<\infty$ is needed
if $E=\mathbb R^1$, then $f_k(x)=\chi_{|x|<k}$, then $f_k(x)\to 1$ pointwisely, but not uniform
(see the boundary point)

2. $|f|<\infty$ is needed
Let $f_k$ converge to $f$ pointwise with $|\underbrace{\{f(x)=+\infty\}}_A|>0$
then $|f_k-f|$ is also infinite on $A$

#### Lemma
Under the assumptions of Egorov's theoren, $\forall \epsilon>0,\eta>0 \exists F(closed)\subseteq E$ and $L>0$ s.t. $|E-F|<\eta$ and $|f(x)-f_k(x)|<\epsilon\forall x\in F,k>L$

