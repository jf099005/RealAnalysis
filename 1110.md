## Hardy-Littlewood theorem
$f\in L(\mathbb R^n)$, define
$(Mf)(x) = f^*(x) = \sup_{Q_x}\frac 1{Q_x} |f(y)|dy$

$Q_x:$ cube in $\mathbb R^n$ centered at $x$

Then $f^*\in W-L(\mathbb R^n)$ ( called weak $L(\mathbb R^n)$ )
i.e. $\forall \alpha>0$, $\exists A>0$ s.t. $|\{x:f^*(x)>\alpha\}|\le \frac{A}{\alpha}\|f\|_{L^1(R^n)}$

(weak-type estimate)

### Lemma(Simple Vitali's covering Lemma)

consider $E\subseteq \mathbb R^n$ and $|E|_e<\infty$.
Suppose that $\mathcal F$ is a collection of cubes covering $E$(WLOG we assume that all cubes in $\mathcal F$ are non-degenerate)

then $\exists$ a constant $\beta$, depending on $n$, and a finite number of disjoint cubes, $Q_1,\ldots Q_N$, s.t.
$\sum_{j=1}^N |Q_j|\ge \beta |E|_E$

##### proof.
we index the size of a cube $Q\in \mathcal F$ by $Q=Q(t)$ with $t=\ell(Q)$ // edgelength of $Q$
Let $F_1=F$ and $t_1^* = \sup\{t: Q(t)\in F_1\}$ // the maximum edgelength among all $Q$

discuss on the finiteness of $t^*_1$:

###### case 1.
if $t^*=\infty$, then $\mathcal F_1$ contain a sequence of $Q_j$ s.t. $|Q_j|\to\infty$, then the theorem is trivial

###### case 2.
if $t_1^* < 
\infty$, pick $t_1>\frac 12 t_1^*$ and $Q_1=Q(t_1)$

Next, we split $\mathcal F_1$ into $\mathcal F_1 = \mathcal F_2\cup \mathcal F_2'$, where
- $\mathcal F_2$ contains all cubes in $\mathcal F_1$ which are disjoint from $Q_1$
- $\mathcal F_2'$ contains all cubes in $\mathcal F_1$ which intersect $Q_1$.

Now for any $Q\in \mathcal F_2'$, Let $Q_1^*=5Q_1$(same center and $5$ times edgelength), then $|Q_1^*|=5^n  |Q_1|$ and $Q\subseteq 5 Q_1^*$ for any $Q\in\mathcal F_2'$

start from $j=2$, continue this process for $j=2,3,\ldots$ by:
- letting $t_j^* = \sup \{t:Q(t)\in \mathcal F_{j-1}\}$
- pick $Q_j$ with length $\ell(Q_j)=t_j\ge \frac12 t_j^*$
- splitting $\mathcal F_j = \mathcal F_{j+1}\cup\mathcal F_{j+1}'$ where $F_j$ are cubers that disjoint from $Q_j$

if $\mathcal F_{j+1} = \emptyset$ the stop, otherwise continue

For the case $\mathcal F_{N+1} = \emptyset$ for some $N$, then $E\subseteq \cup_{j=1}^N 5Q_j$
$\implies |E|_e \le 5^n \sum_{j=1}^N |Q_j|$, $\beta=5^{-n}$


consider the other case (i.e. the algorithm did not end), we have $t_j^* \ge t_{j+1}^*\ge \ldots$, i.e. $t_1^*\ge t_2^* \ge \ldots$

If $t_j^*\ge \delta\forall \delta\forall j$, then $\sum_{j=1}^N |Q_j|\to +\infty$ as $N\to\infty$ and $\sum_{j=1}^N |Q_j| \ge \beta |E|_e$ for any $\beta$ and $N>>1$

Now assume $t^*_j\to 0$,  
###### claim: $E\subseteq \cup_{j=1}^\infty Q_j^*$ ($Q_j^*=5Q_j$)
Assume claim $\implies |E|_e \le \sum_{j=1}^\infty 5^n |Q_j|$
so, if $0<\beta < 5$, then $\exists N$ s.t. $\beta |E|_e \le \sum_{j=1}^N |Q_j|$

###### proof of claim
Assume that there exist a cube $Q=Q(t)\in \mathcal F_1$ s.t. $Q$ noes not intersect with any $Q_j$
Then $t\le t_j^*\forall j$ and hence $t=0$, $Q$ is degenerate, contradiction

#### proof of Hardy-Littlewood
Let $E_\alpha = \{x\in \mathbb R^n: f^*(x) > \alpha\}$
UNFINISH